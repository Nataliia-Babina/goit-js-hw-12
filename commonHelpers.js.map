{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44448499-e9e25ac25e8b747c6a75d5b6f'; \nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function findImages(query, page, perPage) {\n   const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    page: page,\n    per_page: perPage,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n    \n    const url = `${BASE_URL}?${params}`;\n  \n  try {\n    const response = await axios.get(url, {params});\n    const data = response.data;\n\n    if (data.hits.length === 0) {\n      throw new Error('Failed to obtain images!');\n    }\n    return data;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n};","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox;\n\nexport function displayImg(images) {\n    const gallery = document.querySelector('.gallery');\n  const markup = images.map(image => {\n    return `\n      <div class=\"div-info\">\n        <a href=\"${image.largeImageURL}\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <div class=\"info-item\">\n            <p class=\"info-title\">Likes</p>\n            <p class=\"info-value\">${image.likes}</p>\n          </div>\n          <div class=\"info-item\">\n            <p class=\"info-title\">Views</p>\n            <p class=\"info-value\">${image.views}</p>\n          </div>\n          <div class=\"info-item\">\n            <p class=\"info-title\">Comments</p>\n            <p class=\"info-value\">${image.comments}</p>\n          </div>\n          <div class=\"info-item\">\n            <p class=\"info-title\">Downloads</p>\n            <p class=\"info-value\">${image.downloads}</p>\n          </div>\n        </div>\n      </div>\n    `;\n  }).join('');\n    \n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    if (!lightbox) {\n       lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\nexport function changesButton(page, maxPage, btnLoadMore) {\n  if (page >= maxPage) {\n    hideLoadMore(btnLoadMore);\n\n    if (maxPage) {\n      iziToast.info({\n        title: 'The End!',\n        message: `We're sorry, but you've reached the end of search results.`,\n      });\n    }\n  } else {\n    showLoadMore(btnLoadMore);\n  }\n}\n\nexport function showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n  });\n}\n\nexport function showLoadMore(btnLoadMore) {\n  btnLoadMore.classList.remove('active');\n}\nexport function hideLoadMore(btnLoadMore) {\n  btnLoadMore.classList.add('active');\n}\n\nexport function showLoader(loader) {\n  loader.classList.remove('hidden');\n}\nexport function hideLoader(loader) {\n  loader.classList.add('hidden');\n}\n\nexport function newScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}  ","import { findImages } from './js/pixabay-api';\nimport { displayImg, showError, showLoadMore, hideLoadMore, showLoader, hideLoader, changesButton, newScroll } from './js/render-functions';\n \nconst form = document.querySelector('.name-form');\nconst input = document.querySelector('input[name=\"query\"]');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.getElementById('loader');\nconst btnLoadMore = document.querySelector('.btn-load-more');\n\nlet query = '';\nlet page = 1;\nlet maxPage = 1;\nlet perPage = 15;\n\nform.addEventListener('submit', async (e) => {\n  e.preventDefault();\n \n  query = input.value.trim();\n\n  if (query === '') {\n    showError('Please enter a search query!');\n     hideLoadMore(btnLoadMore);\n    return;\n  }\n\n  page = 1;\n\n  showLoader(loader);\n  hideLoadMore(btnLoadMore);\n  gallery.innerHTML = ''; \n\n  try {\n    const data = await findImages(query, page, perPage);\n    maxPage = Math.ceil(data.totalHits / perPage);\n    \n    if (maxPage === 0) {\n      showError('Empty Result');\n      hideLoader(loader);\n      changesButton(page, maxPage, btnLoadMore);\n      return;\n    };\n\n    if (data.hits.length === 0) {\n        gallery.innerHTML = ''; \n        showError('Sorry, there are no images matching your search query. Please try again!');\n      return;\n    };\n    showLoadMore(btnLoadMore);\n    displayImg(data.hits);\n    \n    } catch (error) {\n      gallery.innerHTML = ''; \n      showError('Something went wrong. Please try again later.');\n  } finally {\n    hideLoader(loader);\n    \n    }\n  \n  form.reset();\n});\n\n  btnLoadMore.addEventListener('click', async () => {\n  page++;\n  hideLoadMore(btnLoadMore);\n  showLoader(loader);\n  \n\n  try {\n    const data = await findImages(query, page, perPage);\n    \n\n    if (data.hits.length === 0) {\n      showError('No more images found');\n      return;\n    }\n\n    displayImg(data.hits);\n    \n  } catch (error) {\n    gallery.innerHTML = '';\n    showError('Something went wrong. Please try again later.');\n  } finally {\n    hideLoader(loader);\n    changesButton(page, maxPage, btnLoadMore);\n    newScroll();\n  }\n});"],"names":["API_KEY","BASE_URL","findImages","query","page","perPage","params","url","data","axios","error","lightbox","displayImg","images","gallery","markup","image","SimpleLightbox","changesButton","maxPage","btnLoadMore","hideLoadMore","iziToast","showLoadMore","showError","message","showLoader","loader","hideLoader","newScroll","cardHeight","form","input"],"mappings":"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"}